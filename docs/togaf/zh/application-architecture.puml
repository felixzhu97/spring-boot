@startuml Spring Boot 应用架构图
!theme plain
skinparam componentStyle rectangle
skinparam defaultFontName "Microsoft YaHei"

title Spring Boot 应用架构图 (TOGAF Application Architecture)

' 核心应用层
package "核心应用层" {
  component "spring-boot" as SpringBootCore {
    component "SpringApplication" as SpringApp
    component "ApplicationContext" as AppContext
    component "Banner" as Banner
    component "ApplicationRunner" as AppRunner
  }
  
  component "spring-boot-autoconfigure" as AutoConfig {
    component "AutoConfiguration" as AutoConfigClass
    component "ConditionalOnClass" as Conditional
    component "ConfigurationProperties" as ConfigProps
    component "ImportCandidates" as ImportCandidates
  }
  
  component "spring-boot-test" as TestSupport {
    component "TestContext" as TestContext
    component "MockMvc" as MockMvc
    component "TestRestTemplate" as TestRestTemplate
  }
}

' Web应用层
package "Web应用层" {
  component "spring-boot-webmvc" as WebMvc {
    component "DispatcherServlet" as DispatcherServlet
    component "Controller" as Controller
    component "RestController" as RestController
  }
  
  component "spring-boot-webflux" as WebFlux {
    component "WebHandler" as WebHandler
    component "RouterFunction" as RouterFunction
    component "WebClient" as WebClient
  }
  
  component "spring-boot-websocket" as WebSocket {
    component "WebSocketHandler" as WebSocketHandler
    component "STOMP" as STOMP
  }
  
  component "spring-boot-webservices" as WebServices {
    component "SOAP" as SOAP
    component "WSDL" as WSDL
  }
}

' 数据访问应用层
package "数据访问应用层" {
  component "spring-boot-data-jpa" as DataJPA {
    component "EntityManager" as EntityManager
    component "Repository" as Repository
    component "JpaRepository" as JpaRepository
  }
  
  component "spring-boot-data-jdbc" as DataJDBC {
    component "JdbcTemplate" as JdbcTemplate
    component "NamedParameterJdbcTemplate" as NamedJdbcTemplate
  }
  
  component "spring-boot-data-mongodb" as DataMongo {
    component "MongoTemplate" as MongoTemplate
    component "MongoRepository" as MongoRepository
  }
  
  component "spring-boot-data-cassandra" as DataCassandra {
    component "CassandraTemplate" as CassandraTemplate
    component "CassandraRepository" as CassandraRepository
  }
  
  component "spring-boot-data-redis" as DataRedis {
    component "RedisTemplate" as RedisTemplate
    component "RedisRepository" as RedisRepository
  }
  
  component "spring-boot-data-r2dbc" as DataR2DBC {
    component "R2dbcEntityTemplate" as R2dbcTemplate
    component "R2dbcRepository" as R2dbcRepository
  }
}

' 消息应用层
package "消息应用层" {
  component "spring-boot-kafka" as Kafka {
    component "KafkaTemplate" as KafkaTemplate
    component "KafkaListener" as KafkaListener
  }
  
  component "spring-boot-activemq" as ActiveMQ {
    component "JmsTemplate" as JmsTemplate
    component "JmsListener" as JmsListener
  }
  
  component "spring-boot-artemis" as Artemis {
    component "ArtemisTemplate" as ArtemisTemplate
  }
  
  component "spring-boot-amqp" as AMQP {
    component "RabbitTemplate" as RabbitTemplate
    component "RabbitListener" as RabbitListener
  }
  
  component "spring-boot-pulsar" as Pulsar {
    component "PulsarTemplate" as PulsarTemplate
    component "PulsarListener" as PulsarListener
  }
}

' 安全应用层
package "安全应用层" {
  component "spring-boot-security" as Security {
    component "SecurityFilterChain" as SecurityFilterChain
    component "Authentication" as Authentication
    component "Authorization" as Authorization
  }
  
  component "spring-boot-security-oauth2-authorization-server" as OAuth2AuthServer {
    component "AuthorizationServer" as AuthServer
    component "TokenEndpoint" as TokenEndpoint
  }
  
  component "spring-boot-security-oauth2-client" as OAuth2Client {
    component "OAuth2Client" as OAuth2ClientImpl
    component "ClientRegistration" as ClientRegistration
  }
  
  component "spring-boot-security-oauth2-resource-server" as OAuth2Resource {
    component "ResourceServer" as ResourceServer
    component "JwtDecoder" as JwtDecoder
  }
}

' 监控应用层
package "监控应用层" {
  component "spring-boot-actuator" as Actuator {
    component "HealthEndpoint" as HealthEndpoint
    component "MetricsEndpoint" as MetricsEndpoint
    component "InfoEndpoint" as InfoEndpoint
  }
  
  component "spring-boot-micrometer-metrics" as Micrometer {
    component "MeterRegistry" as MeterRegistry
    component "Counter" as Counter
    component "Timer" as Timer
  }
  
  component "spring-boot-micrometer-tracing" as Tracing {
    component "Tracer" as Tracer
    component "Span" as Span
  }
}

' 应用集成关系
SpringBootCore --> AutoConfig : 使用
SpringBootCore --> TestSupport : 提供

WebMvc --> SpringBootCore : 依赖
WebFlux --> SpringBootCore : 依赖
WebSocket --> SpringBootCore : 依赖
WebServices --> SpringBootCore : 依赖

DataJPA --> AutoConfig : 自动配置
DataJDBC --> AutoConfig : 自动配置
DataMongo --> AutoConfig : 自动配置
DataCassandra --> AutoConfig : 自动配置
DataRedis --> AutoConfig : 自动配置
DataR2DBC --> AutoConfig : 自动配置

Kafka --> AutoConfig : 自动配置
ActiveMQ --> AutoConfig : 自动配置
Artemis --> AutoConfig : 自动配置
AMQP --> AutoConfig : 自动配置
Pulsar --> AutoConfig : 自动配置

Security --> AutoConfig : 自动配置
OAuth2AuthServer --> Security : 扩展
OAuth2Client --> Security : 扩展
OAuth2Resource --> Security : 扩展

Actuator --> SpringBootCore : 依赖
Micrometer --> Actuator : 集成
Tracing --> Micrometer : 扩展

WebMvc --> DataJPA : 可以使用
WebMvc --> DataJDBC : 可以使用
WebFlux --> DataR2DBC : 可以使用
WebMvc --> Kafka : 可以使用
WebMvc --> Security : 可以使用
WebMvc --> Actuator : 可以使用

@enduml
